webpackJsonp([0],[,,,,,,,,,,,,,function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Arcomage=void 0;var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),s=r(38),n=r(42);t.Arcomage=function(){function Arcomage(e,t,r,a,i,o,c,u,l){_classCallCheck(this,Arcomage),this.playerOneObject=new n.Player(i||e.playerOneName,u||e.playerOneValues,e.maxValues,e.canvasValues,o),this.playerTwoObject=new n.Player(c||e.playerTwoName,l||e.playerTwoValues,e.maxValues,e.canvasValues,o),this.cardsQty=e.cardsQuantity,this.cardsObject=t,this.paramsObject=e,this.playerOneTurnStatus=!0,this.playerTwoTurnStatus=!1,this.gameStatus=!0,this.DOMObject=r,this.cookieObject=a,this.difficultyLevel=o,this.CPUAI=new s.CPUAI(this.playerTwoObject,t,e)}return a(Arcomage,null,[{key:"clearCardsFromCanvas",value:function(e,t){var r=!0,a=!1,s=void 0;try{for(var n,i=t.cards[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var o=n.value,c=o.object;e.fabricElement.remove(c)}}catch(e){a=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw s}}}}]),a(Arcomage,[{key:"getPlayerTurn",value:function(e){return e===this.playerOne?this.playerOneTurn:this.playerTwoTurn}},{key:"gameOver",value:function(e){this.gameStatus=!1;var t=e===this.playerOne;this.cookie.setStatusCookie(this.status),this.DOM.showGameOverMessage(t,this.playerOne.moves,this.playerOne.scores)}},{key:"isOn",value:function(){return this.status}},{key:"playerOneMoved",value:function(){this.playerOne.updateMoves(),this.playerOneTurnStatus=!1,this.playerTwoTurnStatus=!0}},{key:"playerTwoMoved",value:function(){this.playerTwo.updateMoves(),this.playerTwoTurnStatus=!1,this.playerOneTurnStatus=!0}},{key:"playerMoved",value:function(e){e===this.playerOne?this.playerOneMoved():this.playerTwoMoved()}},{key:"highlightActivePlayer",value:function(e){var t=e===this.playerOne?this.playerOne:this.playerTwo,r=e===this.playerOne?this.playerTwo:this.playerOne;t.nameObject.getObjects()[0].setFill(this.params.canvasValues.playersNamesText.activeFillColor),r.nameObject.getObjects()[0].setFill(this.params.canvasValues.playersNamesText.fillColor)}},{key:"applyCard",value:function(e,t,r){this.cards.getSingleCard(e).action(t,r),t.updateScores(this.cards.getScore(e)*(1+this.difficulty/2)),this.cards.deactivate(e),t.towerLife!==this.params.maxValues.tower&&0!==r.towerLife||this.gameOver(t)}},{key:"cardAvailable",value:function(e,t){if(this.cards.isActive(e)){var r=!1,a=!0,s=!1,n=void 0;try{for(var i,o=t.cards[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;this.cards.getSingleCard(e)===c&&(r=!0)}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}return r}return!1}},{key:"allotCards",value:function(e){for(var t=this.cards.names,r=0;e.cards.length<this.cardsQuantity;r++){var a=Math.floor(Math.random()*t.length),s=this.cards.getSingleCard(t[a]);this.cards.isActive(t[a])?this.allotCards(e):(this.cards.activate(t[a]),e.updateCards(s))}return!0}},{key:"allotCardsFromCookies",value:function(){var e=this.cookie.getPlayerOneValues().cards,t=this.cookie.getPlayerTwoValues().cards,r=!0,a=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var o=n.value;this.cards.activate(o),this.playerOne.updateCards(this.cards.getSingleCard(o))}}catch(e){a=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw s}}var c=!0,u=!1,l=void 0;try{for(var d,g=t[Symbol.iterator]();!(c=(d=g.next()).done);c=!0){var m=d.value;this.cards.activate(m),this.playerTwo.updateCards(this.cards.getSingleCard(m))}}catch(e){u=!0,l=e}finally{try{!c&&g.return&&g.return()}finally{if(u)throw l}}}},{key:"clearCPUBackOfCards",value:function(e){var t=!0,r=!1,a=void 0;try{for(var s,n=this.playerTwo.cards[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var i=s.value,o=i.backObject;e.fabricElement.remove(o)}}catch(e){r=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(r)throw a}}}},{key:"CPUMove",value:function(e){var t=this;t.drawBackOfCards(e,t.playerTwo),t.CPU_AI.move(e,t,t.playerTwo.cards),document.addEventListener("CPU moved",function(r){r.stopImmediatePropagation(),new Promise(function(r,a){t.clearCPUBackOfCards(e),r(),a(function(){throw new Error("Can`t clear back of cards!")})}).then(function(){t.updateResources(t.playerOne.sources,t.playerTwo.sources)}).then(function(){t.drawCards(e,t.playerOne)})})}},{key:"drawBackOfCards",value:function(e,t){this.clearCPUBackOfCards(e);for(var r=0;r<t.cards.length;r++){var a=t.cards[r].backObject,s=0===r?this.cardsValues.padding:(t.cards[r].backObject.getWidth()+2*this.cardsValues.padding)*r+this.cardsValues.padding;a.setLeft(s),a.setOpacity(1),e.fabricElement.add(a)}this.highlightActivePlayer(t),e.fabricElement.renderAll()}},{key:"drawCards",value:function(e,t){Arcomage.clearCardsFromCanvas(e,t);for(var r=0;r<t.cards.length;r++){var a=t.cards[r].object,s=0===r?2*this.cardsValues.padding:(t.cards[r].object.getWidth()+2*this.cardsValues.padding)*r+2*this.cardsValues.padding;a.setLeft(s),a.setOpacity(.9),e.fabricElement.add(a)}this.highlightActivePlayer(t),e.fabricElement.renderAll()}},{key:"updateResources",value:function(e,t){var r=Object.keys(this.params.relations),a={},s={},n=!0,i=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var l=c.value;a[this.params.relations[l]]=e[l],s[this.params.relations[l]]=t[l]}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}this.playerOne.updateResources(a),this.playerTwo.updateResources(s),this.cookie.setCookie(this.playerOne,this.playerTwo)}},{key:"params",get:function(){return this.paramsObject}},{key:"playerOne",get:function(){return this.playerOneObject}},{key:"playerOneTurn",get:function(){return this.playerOneTurnStatus}},{key:"playerTwo",get:function(){return this.playerTwoObject}},{key:"playerTwoTurn",get:function(){return this.playerTwoTurnStatus}},{key:"CPU_AI",get:function(){return this.CPUAI}},{key:"cardsValues",get:function(){return this.paramsObject.cardsValues}},{key:"cards",get:function(){return this.cardsObject}},{key:"cardsQuantity",get:function(){return this.cardsQty}},{key:"status",get:function(){return this.gameStatus}},{key:"DOM",get:function(){return this.DOMObject}},{key:"cookie",get:function(){return this.cookieObject}},{key:"difficulty",get:function(){return this.difficultyLevel}}]),Arcomage}()},,,,,,,,,,,,,,,,function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),s=r(34),n=r(35),i=r(37),o=r(39),c=r(40),u=r(13),l=r(41);t.Loader=function(){function Loader(){_classCallCheck(this,Loader)}return a(Loader,[{key:"initCookie",value:function(){this.cookie=new i.Cookie,this.cookie.gameIsOff()&&this.cookie.removeAll()}},{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this;return new Promise(function(e,t){e(new l.Param),t(new Error("Can`t create Default Parameters!"))}).then(function(e){return r.params=e,r.dom=new o.DOM,new n.ArcomageCards}).then(function(a){return r.cards=a,r.cookie.cookiesAreSet()?new u.Arcomage(r.params,r.cards,r.dom,r.cookie,e,t,r.cookie.getPlayerTwoName(),r.cookie.getPlayerOneValues(),r.cookie.getPlayerTwoValues()):new u.Arcomage(r.params,r.cards,r.dom,r.cookie,e,t)}).then(function(e){return r.game=e,new s.Canvas(r.params.canvasDivId,r.params.canvasId)}).then(function(e){r.canvas=e,r.canvas.setCanvasDimensions()}).then(function(){return r.canvas.drawAll(r.cards,r.params.cardsValues,r.params.relations,r.game.playerOne,r.game.playerTwo,r.params.canvasValues),new c.Events(r.params,r.cards,r.canvas,r.game)}).then(function(e){return r.events=e,r.canvas.imagesLoaded}).then(function(e){return Promise.all(e)})}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this;this.init(Loader.escapeHtml(e),t).then(function(){r.events.init(),Loader.hideLoader(),Loader.showCanvas(),r.cookie.cookiesAreSet()?r.game.allotCardsFromCookies():(r.game.allotCards(r.game.playerOne),r.game.allotCards(r.game.playerTwo)),r.game.drawCards(r.canvas,r.game.playerOne)})}},{key:"params",get:function(){return this.paramsObject},set:function(e){this.paramsObject=e}},{key:"cards",get:function(){return this.cardsObject},set:function(e){this.cardsObject=e}},{key:"game",get:function(){return this.gameObject},set:function(e){this.gameObject=e}},{key:"canvas",get:function(){return this.canvasObject},set:function(e){this.canvasObject=e}},{key:"events",get:function(){return this.eventsObject},set:function(e){this.eventsObject=e}},{key:"dom",get:function(){return this.domObject},set:function(e){this.domObject=e}},{key:"cookie",get:function(){return this.cookieObject},set:function(e){this.cookieObject=e}}],[{key:"hideLoader",value:function(){document.getElementById("loader").style.display="none"}},{key:"showCanvas",value:function(){document.getElementById("arcomage").style.display="block"}},{key:"escapeHtml",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}}]),Loader}()},,,,,function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.Canvas=function(){function Canvas(e,t){_classCallCheck(this,Canvas),this.containerId=e,this.canvasId=t,this.canvas=new fabric.Canvas(t,{selection:!1}),this.promises=[],this.canvasWidth=765,this.canvasHeight=765}return a(Canvas,[{key:"setCanvasDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;this.fabricElement.setHeight(t),this.fabricElement.setWidth(e)}},{key:"createCards",value:function(e,t,r){var a=this,s=t.padding,n=t.width,i=t.height,o=e.names,c=!0,u=!1,l=void 0;try{for(var d,g=o[Symbol.iterator]();!(c=(d=g.next()).done);c=!0)!function(){var o=d.value,c=e.getSingleCard(o),u=c.description.eng.length>=15?14:15,l=c.text.eng.length>=20?14:15,g=c.resource[r[c.source]],m=t.priceCircleRadius,f=new fabric.Rect({width:n,height:i-t.discardHeight,fill:t.cardsBodyColor,stroke:t[c.source].color,strokeWidth:t.cardsStrokeWidth,rx:t.cardsBordersRadius,ry:t.cardsBordersRadius,originX:"right",originY:"top"}),p=new fabric.Textbox(c.text.eng,{fontSize:l,width:n-t.cardsStrokeWidth,left:-n-t.cardsStrokeWidth,top:t.mainTextPadding,fill:t[c.source].textColor,editable:!1,textAlign:"center"}),b=new fabric.Textbox(c.description.eng,{fontSize:u,width:n-t.cardsStrokeWidth,left:-n-t.cardsStrokeWidth,top:s,fill:t[c.source].textColor,editable:!1,textAlign:"center"}),h=new fabric.Textbox(g.toString(),{fontSize:t.priceFontSize,fontWeight:"bold",lineHeight:t.priceFontSize,width:2*m,height:2*m,left:2*-m-s,top:i-t.discardHeight-2*m-s,fill:t[c.source].color,editable:!1,textAlign:"center"}),y=new fabric.Rect({width:n+t.priceStrokeWidth,height:t.discardHeight,left:-n-s/2,top:i+s/2-t.discardHeight,fill:"#bdc3c7",rx:t.cardsBordersRadius,ry:t.cardsBordersRadius}),w=new fabric.Textbox(e.discardText,{fontSize:t.discardFontSize,width:n,left:-n-s/2,top:i-3*t.discardHeight/4,fill:t[c.source].textColor,editable:!1,textAlign:"center"}),v=new Promise(function(r,i){var u=new Image;u.src=c.src,u.onload=function(){var c=t.imageWidth,l=new fabric.Image(u,{width:c,height:t.imageHeight,left:-(c+n+s)/2,top:t.imagePadding}),d=new fabric.Group([f,b,l,p,h,y,w],{left:s,top:a.fabricElement.height-f.getHeight()-2*s-t.discardHeight,selectable:!1,lockMovementY:!0,hasControls:!1,hasBorders:!1,subTargetCheck:!0,hoverCursor:"pointer"});e.setCardObject(o,d),r(),i(new Error("Can`t load cards images"))}});a.imagesLoaded.push(v)}()}catch(e){u=!0,l=e}finally{try{!c&&g.return&&g.return()}finally{if(u)throw l}}}},{key:"createBackOfCard",value:function(e,t){var r=this,a=t.padding,s=t.width,n=t.height,i=e.names,o=!0,c=!1,u=void 0;try{for(var l,d=i[Symbol.iterator]();!(o=(l=d.next()).done);o=!0)!function(){var i=l.value,o=new fabric.Rect({width:s,height:n,fill:t.backColor,stroke:t.backTextColor,strokeWidth:t.cardsStrokeWidth,rx:t.cardsBordersRadius,ry:t.cardsBordersRadius,originX:"right",originY:"top"}),c=new fabric.Textbox("ARCOMAGE",{fontSize:t.backTextFontSize,width:s,left:-s,top:n-t.backTextPadding,fill:t.backTextColor,editable:!1,textAlign:"center"}),u=new Promise(function(t,n){var u=new Image,l=s;u.src=e.backOfCardSource,u.onload=function(){var d=new fabric.Image(u,{width:l,height:l,left:-s,top:u.height/8}),g=new fabric.Group([o,d,c],{left:a,top:r.fabricElement.height-o.getHeight()-2*a,selectable:!1,hasBorders:!1,hoverCursor:"default"});e.setBackOfCardObject(i,g),t(),n(new Error("Can`t load cards images"))}});r.imagesLoaded.push(u)}()}catch(e){c=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(c)throw u}}}},{key:"createNames",value:function(e,t,r){function createText(e){return new fabric.Textbox(e,{fontSize:r.playersNamesText.fontSize,fill:r.playersNamesText.fillColor,width:r.playersNamesText.width,editable:!1,fontWeight:"bold",fontFamily:"'Lato', sans-serif",textAlign:"center",originX:"left",originY:"top"})}var a=this,s=new fabric.Group([createText(e.name.substring(0,r.playersNamesText.maxconstters))],{left:r.playersNamesText.padding,top:0,selectable:!1,objectCaching:!1,hoverCursor:"default"}),n=new fabric.Group([createText(t.name.substring(0,r.playersNamesText.maxconstters))],{left:a.width-r.playersNamesText.width-r.playersNamesText.padding-r.playersNamesText.strokeWidth,top:0,selectable:!1,objectCaching:!1,hoverCursor:"default"});e.nameObject=s,t.nameObject=n,this.fabricElement.add(e.nameObject),this.fabricElement.add(t.nameObject)}},{key:"createOneSandR",value:function(e,t,r,a){var s=this,n=a.sources,i=function(e){return e[0].toUpperCase()+e.slice(1)},o=n[e].position*(n.height+n.paddingTop),c=a.playersNamesText.height+a.playersNamesText.padding+n[e].position*(n.height+n.paddingTop),u=new Promise(function(a,u){var l=new Image;l.src=n[e].src,l.onload=function(){function createSourcesText(r){var a=r===t?0:n.descFontSize;return new fabric.Textbox(i(e),{width:n.imgWidth,left:a,top:-n.descFontSize,fontSize:n.descFontSize,fontWeight:"bold",fill:n[e].color,selectable:!1,hasBorders:!1,textAlign:"center",originX:"left",originY:"top"})}function createSourceValue(r){var a=r===t?n.padding-n.borderRadius:s.width-n.imgWidth-n.resImgWidth-n.padding-n.borderRadius;return new fabric.Textbox(r.sources[e].toString(),{width:n.imgWidth,left:a,top:c+n.paddingTop+n.imgHeight+n.descFontSize/2,fontSize:n.fontSize,fontWeight:"bold",fill:n[e].color,objectCaching:!1,selectable:!1,hasBorders:!1,hoverCursor:"default",textAlign:"center",originX:"left",originY:"top"})}l.width=n.imgWidth,l.height=n.imgHeight;var d=new fabric.Image(l,{left:0,top:0}),g=new fabric.Image(l,{left:n.width-n.imgWidth,top:0}),m=new fabric.Group([createSourcesText(t),d],{objectCaching:!0,left:n.padding-n.borderRadius,top:3*n.paddingTop+o-n.descFontSize,selectable:!1,hasBorders:!1,hoverCursor:"default"}),f=new fabric.Group([createSourcesText(r),g],{objectCaching:!0,left:s.width-n.imgWidth-n.resImgWidth-n.padding-n.borderRadius,top:3*n.paddingTop+o-n.descFontSize,selectable:!1,hasBorders:!1,hoverCursor:"default"});!function(){t.sourcesObject[e]=createSourceValue(t),s.fabricElement.add(m),s.fabricElement.add(t.sourcesObject[e]),r.sourcesObject[e]=createSourceValue(r),s.fabricElement.add(f),s.fabricElement.add(r.sourcesObject[e])}(),a(),u(new Error("Can`t load source images"))}}),l=new Promise(function(u,l){var d=new Image;d.src=n[e].resSrc,d.onload=function(){function createResourcesText(r){var s=r===t?0:n.descFontSize;return new fabric.Textbox(i(a.relations[e]),{width:n.resImgWidth,left:s,top:-n.descFontSize,fontSize:n.descFontSize,fill:n[e].color,selectable:!1,hasBorders:!1,fontWeight:"bold",textAlign:"center",originX:"left",originY:"top"})}function createResourcesValue(r){var a=r===t?n.padding+n.imgWidth:s.width-n.resImgWidth-n.padding-n.borderRadius;return new fabric.Textbox(r.resources[n[e].resource].toString(),{width:n.resImgWidth,left:a,top:c+n.paddingTop+n.imgHeight+n.descFontSize/2,fontSize:n.fontSize,fill:n[e].color,objectCaching:!1,selectable:!1,hasBorders:!1,fontWeight:"bold",hoverCursor:"default",textAlign:"center",originX:"left",originY:"top"})}d.width=n.resImgWidth,d.height=n.resImgHeight;var g=new fabric.Image(d,{left:0,top:0}),m=new fabric.Image(d,{left:n.width-n.imgWidth,top:0}),f=new fabric.Group([createResourcesText(t),g],{objectCaching:!0,left:n.padding-n.borderRadius+n.imgWidth,top:3*n.paddingTop+o+n.imgHeight-n.resImgHeight-n.descFontSize,selectable:!1,hasBorders:!1,hoverCursor:"default"}),p=new fabric.Group([createResourcesText(r),m],{objectCaching:!0,left:s.width-n.resImgWidth-n.padding-n.borderRadius,top:3*n.paddingTop+o+n.imgHeight-n.resImgHeight-n.descFontSize,selectable:!1,hasBorders:!1,hoverCursor:"default"});!function(){t.resourcesObject[n[e].resource]=createResourcesValue(t),s.fabricElement.add(f),s.fabricElement.add(t.resourcesObject[n[e].resource]),r.resourcesObject[n[e].resource]=createResourcesValue(r),s.fabricElement.add(p),s.fabricElement.add(r.resourcesObject[n[e].resource])}(),u(),l(new Error("Can`t load resources images"))}});s.imagesLoaded.push(u),s.imagesLoaded.push(l)}},{key:"createAllSAndR",value:function(e,t,r){var a=Object.keys(r.relations),s=!0,n=!1,i=void 0;try{for(var o,c=a[Symbol.iterator]();!(s=(o=c.next()).done);s=!0){var u=o.value;this.createOneSandR(u,e,t,r)}}catch(e){n=!0,i=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw i}}}},{key:"createTowers",value:function(e,t,r){function createTowerRoof(e){var t="0 "+r.towers.roofHeight,a=r.towers.roofWidth/2+" 0",s=r.towers.roofWidth+" "+r.towers.roofHeight;return new fabric.Path("M "+t+" L "+a+" L "+s+" z",{top:-r.towers.heightStep*e.towerLife,left:-(r.towers.roofWidth-r.towers.width)/2,fill:r.towers.roofColor,stroke:r.towers.roofStrokeColor,strokeWidth:2,originX:"left",originY:"bottom"})}function createTowerText(e){return new fabric.Textbox(e.towerLife.toString(),{top:(r.towers.height-r.towers.fontSize)/2-r.towers.topTextPadding,width:r.towers.width,fontSize:r.towers.fontSize,fill:r.towers.textColor,textAlign:"center",originX:"left",originY:"top"})}function createTextRect(){return new fabric.Rect({top:-r.towers.topTextPadding,width:r.towers.width,height:r.towers.height,fill:r.towers.towerColor,originX:"left",originY:"top"})}function createTower(e){return new fabric.Rect({width:r.towers.width,height:r.towers.heightStep*e.towerLife,fill:r.towers.towerColor,originX:"left",originY:"bottom"})}var a=this,s=new fabric.Group([createTowerRoof(e),createTower(e),createTextRect(),createTowerText(e)],{objectCaching:!1,left:r.towers.padding,top:a.height-r.towers.positionY,originX:"left",originY:"bottom",selectable:!1,hasBorders:!1,hoverCursor:"default"}),n=new fabric.Group([createTowerRoof(t),createTower(t),createTextRect(),createTowerText(t)],{objectCaching:!1,left:a.width-r.towers.padding,top:a.height-r.towers.positionY,originX:"right",originY:"bottom",selectable:!1,hasBorders:!1,hoverCursor:"default"});!function(){e.towerObject=s,a.fabricElement.add(e.towerObject),t.towerObject=n,a.fabricElement.add(t.towerObject)}()}},{key:"createWalls",value:function(e,t,r){function createWall(e){return new fabric.Rect({width:r.walls.width,height:r.walls.heightStep*e.wallLife,fill:r.walls.wallColor,originX:"left",originY:"bottom"})}function createWallText(e){return new fabric.Textbox(e.wallLife.toString(),{top:(r.towers.height-r.walls.fontSize)/2-r.walls.topTextPadding,width:r.walls.width,fontSize:r.walls.fontSize,fill:r.walls.textColor,textAlign:"center",selectable:!0,originX:"left",originY:"top"})}function createTextRect(){return new fabric.Rect({top:-r.walls.topTextPadding,width:r.walls.width,height:r.towers.height,fill:r.walls.wallColor,originX:"left",originY:"top"})}var a=this,s=new fabric.Group([createWall(e),createTextRect(),createWallText(e)],{objectCaching:!1,left:r.walls.padding,top:a.height-r.walls.positionY,originX:"left",originY:"bottom",selectable:!1,hasBorders:!1,hoverCursor:"default"}),n=new fabric.Group([createWall(t),createTextRect(),createWallText(t)],{objectCaching:!1,left:a.width-r.walls.padding,top:a.height-r.walls.positionY,originX:"right",originY:"bottom",selectable:!1,hasBorders:!1,hoverCursor:"default"});!function(){e.wallObject=s,a.fabricElement.add(e.wallObject),t.wallObject=n,a.fabricElement.add(t.wallObject)}()}},{key:"createSAndRBackground",value:function(e){function createBackground(t){return new fabric.Rect({width:r,height:3*(e.sources.height+e.sources.descFontSize)+e.sources.padding,top:e.playersNamesText.height+e.playersNamesText.padding,left:t,fill:e.sources.backgroundColor,rx:e.sources.borderRadius,ry:e.sources.borderRadius,stroke:e.sources.textColor,strokeWidth:e.sources.backgroundStrokeWidth,opacity:.8,objectCaching:!0,selectable:!1,hasBorders:!1,originX:"left",originY:"top",hoverCursor:"default"})}var t=this,r=e.sources.width+e.sources.resImgWidth-2*e.sources.padding;t.fabricElement.add(createBackground(0)),t.fabricElement.add(createBackground(t.width-r-e.sources.backgroundStrokeWidth))}},{key:"drawAll",value:function(e,t,r,a,s,n){this.createSAndRBackground(n),this.createCards(e,t,r),this.createBackOfCard(e,t),this.createNames(a,s,n),this.createAllSAndR(a,s,n),this.createTowers(a,s,n),this.createWalls(a,s,n)}},{key:"width",get:function(){return this.canvasWidth}},{key:"height",get:function(){return this.canvasHeight}},{key:"fabricElement",get:function(){return this.canvas}},{key:"imagesLoaded",get:function(){return this.promises}}]),Canvas}()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ArcomageCards=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),n=r(36);t.ArcomageCards=function(e){function ArcomageCards(){return _classCallCheck(this,ArcomageCards),_possibleConstructorReturn(this,(ArcomageCards.__proto__||Object.getPrototypeOf(ArcomageCards)).call(this))}return _inherits(ArcomageCards,e),s(ArcomageCards,[{key:"getSingleCard",value:function(e){return this.cards[e]}},{key:"getCardNameByDesc",value:function(e){for(var t=0,r=this.names.length;t<r;t++){if(e===this.getSingleCard(this.names[t]).description)return this.names[t]}}},{key:"getCardObject",value:function(e){return this.getSingleCard(e).object}},{key:"setCardObject",value:function(e,t){"object"===(void 0===t?"undefined":a(t))&&(this.getSingleCard(e).object=t)}},{key:"getBackOfCardObject",value:function(e){return this.getSingleCard(e).backObject}},{key:"setBackOfCardObject",value:function(e,t){"object"===(void 0===t?"undefined":a(t))&&(this.getSingleCard(e).backObject=t)}},{key:"cardCanBeUsed",value:function(e,t){var r=this.getSingleCard(e),a=Object.keys(r.resource)[0],s=r.resource[a];return t.resources[a]-s>=0}},{key:"getScore",value:function(e){var t=this.getSingleCard(e),r=Object.keys(t.resource)[0];return 10*t.resource[r]}},{key:"isActive",value:function(e){return this.getSingleCard(e).isActive}},{key:"deactivate",value:function(e){this.getSingleCard(e).isActive=!1}},{key:"activate",value:function(e){this.getSingleCard(e).isActive=!0}},{key:"cards",get:function(){return this.cardsArray}},{key:"backOfCardSource",get:function(){return this.backOfCardSrc}},{key:"discardText",get:function(){return this.discardTxt}},{key:"names",get:function(){return Object.keys(this.cardsArray)}}]),ArcomageCards}(n.ArcomageCardsContainer)},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.ArcomageCardsContainer=function ArcomageCardsContainer(){_classCallCheck(this,ArcomageCardsContainer),this.cardsArray={amethyst:{name:"amethyst",source:"magic",description:{rus:"Аметист",eng:"Amethyst"},text:{rus:"+3 башня",eng:"+3 tower"},src:"./images/cards/amethyst.png",resource:{gems:2},action:function(e,t){e.updateResources({gems:-2}),e.updateTowerLife(3)},isActive:!1,object:{},backObject:{}},apprentice:{name:"apprentice",source:"magic",description:{rus:"Ученик",eng:"Apprentice"},text:{rus:"+4 башня,\nвы теряете 3 зверя,\n2 урона башне врага",eng:"+4 tower,\nyou lose 3 beasts,\n2 damage to enemy tower"},src:"./images/cards/apprentice.png",resource:{gems:5},action:function(e,t){e.updateResources({gems:-5,beasts:-3}),e.updateTowerLife(4),t.updateTowerLife(-2)},isActive:!1,object:{},backObject:{}},barracks:{name:"barracks",source:"mine",description:{rus:"Барраки",eng:"Barracks"},text:{rus:"+6 зверей, +6 стена,\nесли темница <\nтемницы врага,\n+1 темница",eng:"+6 beasts, +6 wall,\nif dungeon <\nenemy dungeon,\n+1 dungeon"},src:"./images/cards/barracks.png",resource:{bricks:10},action:function(e,t){e.updateResources({bricks:-10,beasts:6}),e.updateWallLife(6),e.sources.dungeon<t.sources.dungeon&&e.updateSources({dungeon:1})},isActive:!1,object:{},backObject:{}},basic_wall:{name:"basic_wall",source:"mine",description:{rus:"Базовая стена",eng:"Basic wall"},text:{rus:"+3 стена",eng:"+3 wall"},src:"./images/cards/basic_wall.png",resource:{bricks:2},action:function(e,t){e.updateResources({bricks:-2}),e.updateWallLife(3)},isActive:!1,object:{},backObject:{}},battlements:{name:"battlements",source:"mine",description:{rus:"Амбразура",eng:"Battlements"},text:{rus:"+7 стена,\n6 урона врагу",eng:"+7 wall,\n6 damage to enemy"},src:"./images/cards/battlements.png",resource:{bricks:14},action:function(e,t){e.updateResources({bricks:-14}),e.updateWallLife(7),t.takeDamage(6)},isActive:!1,object:{},backObject:{}},berserker:{name:"berserker",source:"dungeon",description:{rus:"Берсерк",eng:"Berserker"},text:{rus:"8 урона,\n3 урона вашей башне",eng:"8 damage,\n3 damage to your tower"},src:"./images/cards/berserker.png",resource:{beasts:4},action:function(e,t){e.updateResources({beasts:-4}),t.takeDamage(8),e.updateTowerLife(-3)},isActive:!1,object:{},backObject:{}},big_wall:{name:"big_wall",source:"mine",description:{rus:"Большая стена",eng:"Big wall"},text:{rus:"+6 стена",eng:"+6 wall"},src:"./images/cards/big_wall.png",resource:{bricks:5},action:function(e,t){e.updateResources({bricks:-5}),e.updateWallLife(6)},isActive:!1,object:{},backObject:{}},cave_river:{name:"cave_river",source:"mine",description:{rus:"Пещерная река",eng:"Cave river"},text:{rus:"Игрок с меньшей\nстеной -1 темница\nи -2 башня",eng:"Player with\n lowest wall\n-1 dungeon and \n -2 tower"},src:"./images/cards/cave_river.png",resource:{bricks:6},action:function(e,t){e.updateResources({bricks:-6}),e.wallLife<t.wallLife?(e.updateTowerLife(-2),e.updateSources({dungeon:-1})):e.wallLife===t.wallLife?(e.updateTowerLife(-2),e.updateSources({dungeon:-1}),t.updateTowerLife(-2),t.updateSources({dungeon:-1})):(t.updateTowerLife(-2),t.updateSources({dungeon:-1}))},isActive:!1,object:{},backObject:{}},collapse:{name:"collapse",source:"mine",description:{rus:"Коллапс!",eng:"Collapse!"},text:{rus:"-1 шахта врага",eng:"-1 enemy mine"},src:"./images/cards/collapse.png",resource:{bricks:4},action:function(e,t){e.updateResources({bricks:-4}),t.updateSources({mine:-1})},isActive:!1,object:{},backObject:{}},corrosion_cloud:{name:"corrosion_cloud",source:"dungeon",description:{rus:"Коррозионное облако",eng:"Corrosion cloud"},text:{rus:"Если стена врага > 0\n10 урона, иначе 7 урона",eng:"If enemy wall > 0\n10 damage, else\n7 damage"},src:"./images/cards/corrosion_cloud.png",resource:{beasts:11},action:function(e,t){e.updateResources({beasts:-11}),t.wallLife>0?t.takeDamage(10):t.takeDamage(7)},isActive:!1,object:{},backObject:{}},crumblestone:{name:"crumblestone",source:"magic",description:{rus:"Раскрошенный камень",eng:"Crumblestone"},text:{rus:"+5 башня,\nвраг теряет 6 зверей",eng:"+5 tower,\nenemy loses 6 bricks"},src:"./images/cards/crumblestone.png",resource:{gems:7},action:function(e,t){e.updateResources({gems:-7}),e.updateTowerLife(5),t.updateResources({bricks:-6})},isActive:!1,object:{},backObject:{}},crystallize:{name:"crystallize",source:"magic",description:{rus:"Кристализация",eng:"Crystallize"},text:{rus:"+11 башня,\n-6 стена",eng:"+11 tower,\n-6 wall"},src:"./images/cards/crystallize.png",resource:{gems:8},action:function(e,t){e.updateResources({gems:-8}),e.updateTowerLife(11),e.updateWallLife(-6)},isActive:!1,object:{},backObject:{}},crystal_rock:{name:"crystal_rock",source:"mine",description:{rus:"Кристаллический камень",eng:"Crystal rock"},text:{rus:"+7 стена,\nполучаете 7 самоцветов",eng:"+7 wall,\ngain 7 gems"},src:"./images/cards/crystal_rock.png",resource:{bricks:9},action:function(e,t){e.updateResources({bricks:-9,gems:7}),e.updateWallLife(7)},isActive:!1,object:{},backObject:{}},crystal_shield:{name:"crystal_shield",source:"magic",description:{rus:"Кристаллический щит",eng:"Crystal shield"},text:{rus:"+8 башня,\n+ стена",eng:"+8 tower,\n+3 wall"},src:"./images/cards/crystal_shield.png",resource:{gems:7},action:function(e,t){e.updateResources({gems:-7}),e.updateTowerLife(8),e.updateWallLife(3)},isActive:!1,object:{},backObject:{}},defective_ore:{name:"defective_ore",source:"mine",description:{rus:"Дефектная руда",eng:"Defective ore"},text:{rus:"Все игроки\nтеряют 8 камней",eng:"All players\nlose 8 bricks"},src:"./images/cards/defective_ore.png",resource:{bricks:0},action:function(e,t){e.updateResources({bricks:-8}),t.updateResources({bricks:-8})},isActive:!1,object:{},backObject:{}},defence_magic:{name:"defence_magic",source:"magic",description:{rus:"Защитная магия",eng:"Defence magic"},text:{rus:"+20 башня",eng:"+20 tower"},src:"./images/cards/defence_magic.png",resource:{gems:21},action:function(e,t){e.updateResources({gems:-21}),e.updateTowerLife(20)},isActive:!1,object:{},backObject:{}},demon_slasher:{name:"demon_slasher",source:"dungeon",description:{rus:"Демон-воин",eng:"Demon slasher"},text:{rus:"6 урона",eng:"6 damage"},src:"./images/cards/demon_slasher.png",resource:{beasts:5},action:function(e,t){e.updateResources({beasts:-5}),t.takeDamage(6)},isActive:!1,object:{},backObject:{}},diamond:{name:"diamond",source:"magic",description:{rus:"Бриллиант",eng:"Diamond"},text:{rus:"+15 башня",eng:"+15 tower"},src:"./images/cards/diamond.png",resource:{gems:16},action:function(e,t){e.updateResources({gems:-16}),e.updateTowerLife(15)},isActive:!1,object:{},backObject:{}},discord:{name:"discord",source:"magic",description:{rus:"Спор",eng:"Discord"},text:{rus:"7 урона всем башням,\nвся магия -1",eng:"7 damage to\n all towers,\n all magic -1"},src:"./images/cards/discord.png",resource:{gems:5},action:function(e,t){e.updateResources({gems:-5}),e.updateSources({magic:-1}),e.updateTowerLife(-7),t.updateSources({magic:-1}),t.updateTowerLife(-7)},isActive:!1,object:{},backObject:{}},dragon:{name:"dragon",source:"dungeon",description:{rus:"Дракон",eng:"Dragon"},text:{rus:"20 урона,\nвраг теряет 10 самоцветов,\n-1 темница врага",eng:"20 damage,\nenemy loses 10 gems,\n-1 enemy dungeon"},src:"./images/cards/dragon.png",resource:{beasts:25},action:function(e,t){e.updateResources({beasts:-25}),t.takeDamage(20),t.updateResources({gems:-10}),t.updateSources({dungeon:-1})},isActive:!1,object:{},backObject:{}},dragon_heart:{name:"dragon_heart",source:"mine",description:{rus:"Сердце дракона",eng:"Dragon heart"},text:{rus:"+20 стена,\n+8 башня",eng:"+20 wall,\n+8 tower"},src:"./images/cards/dragon_heart.png",resource:{bricks:24},action:function(e,t){e.updateResources({bricks:-24}),e.updateWallLife(20),e.updateTowerLife(8)},isActive:!1,object:{},backObject:{}},dwarf_merchant:{name:"dwarf_merchant",source:"mine",description:{rus:"Гном-торговец",eng:"Dwarf merchant"},text:{rus:"+5 стена,\nвы теряете 6 самоцветов",eng:"+5 wall,\nyou lose 6 gems"},src:"./images/cards/dwarf_merchant.png",resource:{bricks:2},action:function(e,t){e.updateResources({bricks:-2,gems:-6}),e.updateWallLife(5)},isActive:!1,object:{},backObject:{}},dwarf_miner:{name:"dwarf_miner",source:"mine",description:{rus:"Гном-шахтер",eng:"Dwarf miner"},text:{rus:"+4 стена,\n+1 шахта",eng:"+4 wall,\n+1 mine"},src:"./images/cards/dwarf_miner.png",resource:{bricks:7},action:function(e,t){e.updateResources({bricks:-7}),e.updateWallLife(4),e.updateSources({mine:1})},isActive:!1,object:{},backObject:{}},dwarfs:{name:"dwarfs",source:"dungeon",description:{rus:"Гномы",eng:"Dwarfs"},text:{rus:"4 урона,\n+3 стена",eng:"4 damage,\n+3 wall"},src:"./images/cards/dwarfs.png",resource:{beasts:5},action:function(e,t){e.updateResources({beasts:-5}),t.takeDamage(4),e.updateWallLife(3)},isActive:!1,object:{},backObject:{}},earthquake:{name:"earthquake",source:"mine",description:{rus:"Землетрясение",eng:"Earthquake"},text:{rus:"+1 всем шахтам",eng:"-1 to all mines"},src:"./images/cards/earthquake.png",resource:{bricks:0},action:function(e,t){e.updateResources({bricks:-0}),e.updateSources({mine:-1}),t.updateSources({mine:-1})},isActive:!1,object:{},backObject:{}},elven_archer:{name:"elven_archer",source:"dungeon",description:{rus:"Эльф-лучник",eng:"Elven archer"},text:{rus:"Если стена > стены\nврага, 6 урона\nбашне врага,\nиначе 6 урона",eng:"If wall > enemy\nwall, 6 damage\nto enemy tower\nelse 6 damage"},src:"./images/cards/elven_archer.png",resource:{beasts:10},action:function(e,t){e.updateResources({beasts:-10}),e.wallLife>t.wallLife?t.updateTowerLife(-6):t.takeDamage(6)},isActive:!1,object:{},backObject:{}},emerald:{name:"emerald",source:"magic",description:{rus:"Изумруд",eng:"Emerald"},text:{rus:"+8 башня",eng:"+8 tower"},src:"./images/cards/emerald.png",resource:{gems:6},action:function(e,t){e.updateResources({gems:-6}),e.updateTowerLife(8)},isActive:!1,object:{},backObject:{}},faerie:{name:"faerie",source:"dungeon",description:{rus:"Фея",eng:"Faerie"},text:{rus:"2 урона,\nходить еще раз",eng:"2 damage,\nplay again"},src:"./images/cards/faerie.png",resource:{beasts:1},action:function(e,t){e.updateResources({beasts:-1}),t.takeDamage(2)},isActive:!1,playAgain:!0,object:{},backObject:{}},fire_ruby:{name:"fire_ruby",source:"magic",description:{rus:"Огненный рубин",eng:"Fire ruby"},text:{rus:"+6 башня,\n4 урона башне\nи стене врага",eng:"+6 tower,\n4 damage to\n enemy wall\nand tower"},src:"./images/cards/fire_ruby.png",resource:{gems:13},action:function(e,t){e.updateResources({gems:-13}),e.updateTowerLife(6),t.updateWallLife(-4),t.updateTowerLife(-4)},isActive:!1,object:{},backObject:{}},focused_designs:{name:"focused_designs",source:"mine",description:{rus:"Новые чертежи",eng:"Focused designs"},text:{rus:"+8 стена,\n+5 башня",eng:"+8 wall,\n+5 tower"},src:"./images/cards/focused_designs.png",resource:{bricks:15},action:function(e,t){e.updateResources({bricks:-15}),e.updateWallLife(8),e.updateTowerLife(5)},isActive:!1,object:{},backObject:{}},forced_labor:{name:"forced_labor",source:"mine",description:{rus:"Рабский труд",eng:"Forced labor"},text:{rus:"+9 стена,\nтеряете 5 зверей",eng:"+9 wall,\nlose 5 beasts"},src:"./images/cards/forced_labor.png",resource:{bricks:7},action:function(e,t){e.updateResources({bricks:-7,beasts:-5}),e.updateWallLife(9)},isActive:!1,object:{},backObject:{}},foundations:{name:"foundations",source:"mine",description:{rus:"Фундамент",eng:"Foundations"},text:{rus:"Если стена = 0,\n+6 стена,\nиначе +3 стена",eng:"If wall = 0,\n+6 wall,\nelse +3 wall"},src:"./images/cards/foundations.png",resource:{bricks:3},action:function(e,t){e.updateResources({bricks:-3}),0===e.wallLife?e.updateWallLife(6):e.updateWallLife(3)},isActive:!1,object:{},backObject:{}},friendly_terrain:{name:"friendly_terrain",source:"mine",description:{rus:"Благодатная почва",eng:"Friendly terrain"},text:{rus:"+1 стена,\nходить еще раз",eng:"+1 wall,\nplay again"},src:"./images/cards/friendly_terrain.png",resource:{bricks:1},action:function(e,t){e.updateResources({bricks:-1}),e.updateWallLife(1)},isActive:!1,playAgain:!0,object:{},backObject:{}},full_moon:{name:"full_moon",source:"dungeon",description:{rus:"Полнолуние",eng:"Full moon"},text:{rus:"+1 ко всем темницам,\nвы получаете 3 зверей",eng:"+1 to all dungeons,\nyou gain 3 beasts"},src:"./images/cards/full_moon.png",resource:{beasts:0},action:function(e,t){e.updateResources({beasts:3}),t.updateSources({dungeon:1}),e.updateSources({dungeon:1})},isActive:!1,object:{},backObject:{}},gargoyle:{name:"gargoyle",source:"dungeon",description:{rus:"Гаргулия",eng:"Gargoyle"},text:{rus:"2 урона,\n+4 стена,\n+2 башня",eng:"2 damage,\n+4 wall,\n+2 tower"},src:"./images/cards/gargoyle.png",resource:{beasts:8},action:function(e,t){e.updateResources({beasts:-8}),e.updateWallLife(4),e.updateTowerLife(2),t.takeDamage(2)},isActive:!1,object:{},backObject:{}},gem_spear:{name:"gem_spear",source:"magic",description:{rus:"Рунное копье",eng:"Gem spear"},text:{rus:"5 урона\nбашне врага",eng:"5 damage to\nenemy tower"},src:"./images/cards/gem_spear.png",resource:{gems:4},action:function(e,t){e.updateResources({gems:-4}),t.updateTowerLife(-5)},isActive:!1,object:{},backObject:{}},gemstone_flaw:{name:"gemstone_flaw",source:"magic",description:{rus:"Дефектный самоцвет",eng:"Gemstone flaw"},text:{rus:"3 урона\nбашне врага",eng:"3 damage to\nenemy tower"},src:"./images/cards/gemstone_flaw.png",resource:{gems:2},action:function(e,t){e.updateResources({gems:-2}),t.updateTowerLife(-3)},isActive:!1,object:{},backObject:{}},gnoll:{name:"gnoll",source:"dungeon",description:{rus:"Гнолл",eng:"Gnoll"},text:{rus:"3 урона,\n+1 самоцвет",eng:"3 damage,\n+1 gem"},src:"./images/cards/gnoll.png",resource:{beasts:2},action:function(e,t){e.updateResources({beasts:-2,gems:1}),t.takeDamage(3)},isActive:!1,object:{},backObject:{}},goblin_archer:{name:"goblin_archer",source:"dungeon",description:{rus:"Гоблин-лучник",eng:"Goblin archer"},text:{rus:"3 урона башне\nврага, вы получаете\n1 урона",eng:"3 damage to\nenemy tower,\nyou take\n1 damage"},src:"./images/cards/goblin_archer.png",resource:{beasts:4},action:function(e,t){e.updateResources({beasts:-4}),t.updateTowerLife(-3),e.takeDamage(1)},isActive:!1,object:{},backObject:{}},goblin_mob:{name:"goblin_mob",source:"dungeon",description:{rus:"Гоблин",eng:"Goblin mob"},text:{rus:"6 урона,\nвы получаете\n3 урона",eng:"6 damage,\n you take\n3 damage"},src:"./images/cards/goblin_mob.png",resource:{beasts:3},action:function(e,t){e.updateResources({beasts:-3}),t.takeDamage(6),e.takeDamage(3)},isActive:!1,object:{},backObject:{}},gold_mine:{name:"gold_mine",source:"mine",description:{rus:"Золотая шахта",eng:"Gold mine"},text:{rus:"Если шахта < шахты\nврага, +2 шахта,\nиначе +1 шахта",eng:"If mine < enemy\nmine, +2 mine,\nelse +1 mine"},src:"./images/cards/gold_mine.png",resource:{bricks:4},action:function(e,t){e.updateResources({bricks:-4}),e.sources.mine<t.sources.mine?e.updateSources({mine:2}):e.updateSources({mine:1})},isActive:!1,object:{},backObject:{}},great_wall:{name:"great_wall",source:"mine",description:{rus:"Великая стена",eng:"Great wall"},text:{rus:"+15 стена",eng:"+15 wall"},src:"./images/cards/great_wall.png",resource:{bricks:16},action:function(e,t){e.updateResources({bricks:-16}),e.updateWallLife(15)},isActive:!1,object:{},backObject:{}},harmonic_ore:{name:"harmonic_ore",source:"mine",description:{rus:"Гармоническая руда",eng:"Harmonic ore"},text:{rus:"+6 стена,\n+3 башня",eng:"+6 wall,\n+3 tower"},src:"./images/cards/harmonic_ore.png",resource:{bricks:11},action:function(e,t){e.updateResources({bricks:-11}),e.updateWallLife(6),e.updateTowerLife(3)},isActive:!1,object:{},backObject:{}},harmony:{name:"harmony",source:"magic",description:{rus:"Гармония",eng:"Harmony"},text:{rus:"+1 магия,\n+3 башня,\n+3 стена",eng:"+1 magic,\n+3 tower,\n+3 wall"},src:"./images/cards/harmony.png",resource:{gems:7},action:function(e,t){e.updateResources({gems:-7}),e.updateSources({magic:1}),e.updateWallLife(3),e.updateTowerLife(3)},isActive:!1,object:{},backObject:{}},hydralisk:{name:"hydralisk",source:"dungeon",description:{rus:"Гидралиск",eng:"Hydralisk"},text:{rus:"Если стена врага = 0,\n10 урона,\nиначе 6 урона",eng:"If enemy wall=0,\n10 damage,\nelse 6 damage"},src:"./images/cards/hydralisk.png",resource:{beasts:8},action:function(e,t){e.updateResources({beasts:-8}),0===t.wallLife?t.takeDamage(10):t.takeDamage(6)},isActive:!1,object:{},backObject:{}},imp:{name:"imp",source:"dungeon",description:{rus:"Имп",eng:"Imp"},text:{rus:"6 урона, все\nигроки теряют 5 камней, самоцветов и зверей",eng:"6 damage, all\nplayers lose 5 bricks, gems and beasts"},src:"./images/cards/imp.png",resource:{beasts:5},action:function(e,t){e.updateResources({beasts:-10,bricks:-5,gems:-5}),t.updateResources({beasts:-5,bricks:-5,gems:-5}),t.takeDamage(6)},isActive:!1,object:{},backObject:{}},innovations:{name:"innovations",source:"mine",description:{rus:"Инновации",eng:"Innovations"},text:{rus:"+1 ко всем шахтам,\nвы получаете 4 самоцвета",eng:"+1 to all player`s mines, you gain 4 gems"},src:"./images/cards/innovations.png",resource:{bricks:2},action:function(e,t){e.updateResources({bricks:-2,gems:4}),e.updateSources({mine:1}),t.updateSources({mine:1})},isActive:!1,object:{},backObject:{}},lightning_shard:{name:"lightning_shard",source:"magic",description:{rus:"Удар молнии",eng:"Lightning shard"},text:{rus:"Если башня > башни\nврага, 8 урона, башне врага,\nиначе 8 урона",eng:"If tower > enemy\nwall, 8 damage\nto enemy tower,\nelse 8 damage"},src:"./images/cards/lightning_shard.png",resource:{gems:11},action:function(e,t){e.updateResources({gems:-11}),e.towerLife>t.wallLife?t.updateTowerLife(-8):t.takeDamage(8)},isActive:!1,object:{},backObject:{}},lodestone:{name:"lodestone",source:"magic",description:{rus:"Магнитная руда",eng:"Lodestone"},text:{rus:"+3 башня",eng:"+3 tower"},src:"./images/cards/lodestone.png",resource:{gems:5},action:function(e,t){e.updateResources({gems:-5}),e.updateTowerLife(3)},isActive:!1,object:{},backObject:{}},lucky_coin:{name:"lucky_coin",source:"mine",description:{rus:"Счастливая монета",eng:"Lucky coin"},text:{rus:"+2 камня,\n+2 самоцвета,\nходить еще раз",eng:"+2 bricks,\n+2 gems,\nplay again"},src:"./images/cards/lucky_coin.png",resource:{bricks:0},action:function(e,t){e.updateResources({bricks:2,gems:2})},isActive:!1,playAgain:!0,object:{},backObject:{}},mad_cow_disease:{name:"mad_cow_disease",source:"dungeon",description:{rus:"Коровье бешенство",eng:"Mad cow disease"},text:{rus:"Все игроки теряют 6 зверей",eng:"All players lose 6 beasts"},src:"./images/cards/mad_cow_disease.png",resource:{beasts:0},action:function(e,t){e.updateResources({beasts:-6}),t.updateResources({beasts:-6})},isActive:!1,object:{},backObject:{}},magic_book:{name:"magic_book",source:"magic",description:{rus:"Магическая книга",eng:"Magic book"},text:{rus:"+8 башня,\n+1 темница",eng:"+8 tower,\n+1 dungeon"},src:"./images/cards/magic_book.png",resource:{gems:14},action:function(e,t){e.updateResources({gems:-14}),e.updateSources({dungeon:1}),e.updateTowerLife(8)},isActive:!1,object:{},backObject:{}},meditation:{name:"meditation",source:"magic",description:{rus:"Медитация",eng:"Meditation"},text:{rus:"+13 башня,\n+6 зверей,\n+6 камней",eng:"+13 tower,\n+6 beasts,\n+6 bricks"},src:"./images/cards/meditation.png",resource:{gems:18},action:function(e,t){e.updateResources({beasts:6,bricks:6,gems:-18}),e.updateTowerLife(13)},isActive:!1,object:{},backObject:{}},medusa:{name:"medusa",source:"dungeon",description:{rus:"Медуза",eng:"Medusa"},text:{rus:"6 урона,\nвраг теряет\n3 зверя",eng:"6 damage,\n enemy loses\n 3 beasts"},src:"./images/cards/medusa.png",resource:{beasts:6},action:function(e,t){e.updateResources({beasts:-6}),t.updateResources({beasts:-3}),t.takeDamage(6)},isActive:!1,object:{},backObject:{}},miners:{name:"miners",source:"mine",description:{rus:"Шахтеры",eng:"Miners"},text:{rus:"+1 шахта",eng:"+1 mine"},src:"./images/cards/miners.png",resource:{bricks:3},action:function(e,t){e.updateResources({bricks:-3}),e.updateSources({mine:1})},isActive:!1,object:{},backObject:{}},minotaur:{name:"minotaur",source:"dungeon",description:{rus:"Минотавр",eng:"Minotaur"},text:{rus:"+1 темница",eng:"+1 dungeon"},src:"./images/cards/minotaur.png",resource:{beasts:3},action:function(e,t){e.updateResources({beasts:-3}),e.updateSources({dungeon:1})},isActive:!1,object:{},backObject:{}},mondo_wall:{name:"mondo_wall",source:"mine",description:{rus:"Отличная стена",eng:"Mondo wall"},text:{rus:"+12 стена",eng:"+12 wall"},src:"./images/cards/mondo_wall.png",resource:{bricks:13},action:function(e,t){e.updateResources({bricks:-13}),e.updateWallLife(12)},isActive:!1,object:{},backObject:{}},moody_goblins:{name:"moody_goblins",source:"dungeon",description:{rus:"Угрюмые гоблины",eng:"Moody goblins"},text:{rus:"4 урона,\nвы теряете 3 самоцвета",eng:"4 damage,\nyou lose 3 gems"},src:"./images/cards/moody_goblins.png",resource:{beasts:1},action:function(e,t){e.updateResources({beasts:-1,gems:-3}),t.takeDamage(4)},isActive:!1,object:{},backObject:{}},new_equipment:{name:"new_equipment",source:"mine",description:{rus:"Новое оборудование",eng:"New equipment"},text:{rus:"+2 шахта",eng:"+2 mine"},src:"./images/cards/new_equipment.png",resource:{bricks:6},action:function(e,t){e.updateResources({bricks:-6}),e.updateSources({mine:2})},isActive:!1,object:{},backObject:{}},ogre:{name:"ogre",source:"dungeon",description:{rus:"Огр",eng:"Ogre"},text:{rus:"7 урона",eng:"7 damage"},src:"./images/cards/ogre.png",resource:{beasts:6},action:function(e,t){e.updateResources({beasts:-6}),t.takeDamage(7)},isActive:!1,object:{},backObject:{}},orc:{name:"orc",source:"dungeon",description:{rus:"Орк",eng:"Orc"},text:{rus:"5 урона",eng:"5 damage"},src:"./images/cards/orc.png",resource:{beasts:3},action:function(e,t){e.updateResources({beasts:-3}),t.takeDamage(5)},isActive:!1,object:{},backObject:{}},parity:{name:"parity",source:"magic",description:{rus:"Паритет",eng:"Parity"},text:{rus:"Магия всех игроков равняется магии игрока с большей магией",eng:"All player`s magic equals the highest player`s magic"},src:"./images/cards/parity.png",resource:{gems:7},action:function(e,t){e.updateResources({gems:-7}),e.sources.magic>t.sources.magic?t.updateSources({magic:e.sources.magic-t.sources.magic}):e.updateSources({magic:t.sources.magic-e.sources.magic})},isActive:!1,object:{},backObject:{}},pearl_of_wisdom:{name:"pearl_of_wisdom",source:"magic",description:{rus:"Жемчужина мудрости",eng:"Pearl of wisdom"},text:{rus:"+5 башня,\n+1 магия",eng:"+5 tower\n+1 magic"},src:"./images/cards/pearl_of_wisdom.png",resource:{gems:9},action:function(e,t){e.updateResources({gems:-9}),e.updateTowerLife(5),e.updateSources({magic:1})},isActive:!1,object:{},backObject:{}},pegasus:{name:"pegasus",source:"dungeon",description:{rus:"Пегас",eng:"Pegasus"},text:{rus:"12 урона башне врага",eng:"12 damage to\n enemy tower"},src:"./images/cards/pegasus.png",resource:{beasts:18},action:function(e,t){e.updateResources({beasts:-18}),t.updateTowerLife(-12)},isActive:!1,object:{},backObject:{}},portcullis:{name:"portcullis",source:"mine",description:{rus:"Решетка",eng:"Portcullis"},text:{rus:"+5 стена,\n+1 темница",eng:"+5 wall\n+1 dungeon"},src:"./images/cards/portcullis.png",resource:{bricks:9},action:function(e,t){e.updateResources({bricks:-9}),e.updateWallLife(5),e.updateSources({dungeon:1})},isActive:!1,object:{},backObject:{}},power_burn:{name:"power_burn",source:"magic",description:{rus:"Силовой взрыв",eng:"Power burn"},text:{rus:"5 урона вашей\nбашни, +2 магия",eng:"5 damage to\nyour tower,\n+2 magic"},src:"./images/cards/power_burn.png",resource:{gems:3},action:function(e,t){e.updateResources({gems:-3}),e.updateTowerLife(-5),e.updateSources({magic:2})},isActive:!1,object:{},backObject:{}},prism:{name:"prism",source:"magic",description:{rus:"Призма",eng:"Prism"},text:{rus:"Если башня <\nбашни врага\n+2 башния,\nиначе +1 башня",eng:"If tower <\nenemy tower\n+2 tower,\nelse +1 tower"},src:"./images/cards/prism.png",resource:{gems:0},action:function(e,t){e.towerLife<t.towerLife?e.updateTowerLife(2):e.updateTowerLife(1)},isActive:!1,object:{},backObject:{}},quarrys_help:{name:"quarrys_help",source:"magic",description:{rus:"Помощь из карьера",eng:"Quarry`s help"},text:{rus:"+7 башня,\nвы теряете 10 камней",eng:"+7 tower,\nlose 10 bricks"},src:"./images/cards/quarrys_help.png",resource:{gems:4},action:function(e,t){e.updateResources({gems:-4,bricks:-10}),e.updateTowerLife(7)},isActive:!1,object:{},backObject:{}},quartz:{name:"quartz",source:"magic",description:{rus:"Кварц",eng:"Quartz"},text:{rus:"+1 башня,\nходить еще раз",eng:"+1 tower,\nplay again"},src:"./images/cards/quartz.png",resource:{gems:1},action:function(e,t){e.updateResources({gems:-1}),e.updateTowerLife(1)},isActive:!1,playAgain:!0,object:{},backObject:{}},rainbow:{name:"rainbow",source:"magic",description:{rus:"Радуга",eng:"Rainbow"},text:{rus:"+1 башня всех\nигроков, вы получаете\n3 самоцвета",eng:"+1 tower to\nall players,\nyou gain 3 gems"},src:"./images/cards/rainbow.png",resource:{gems:0},action:function(e,t){e.updateResources({gems:3}),e.updateTowerLife(1),t.updateTowerLife(1)},isActive:!1,object:{},backObject:{}},rare_ring:{name:"rare_ring",source:"magic",description:{rus:"Редкое кольцо",eng:"Rare ring"},text:{rus:"+1 магия,\n+3 башня,\n+1 башня врага",eng:"+1 magic,\n+3 tower,\n+1 enemy tower"},src:"./images/cards/rare_ring.png",resource:{gems:6},action:function(e,t){e.updateResources({gems:-6}),e.updateSources({magic:1}),e.updateTowerLife(3),t.updateTowerLife(1)},isActive:!1,object:{},backObject:{}},reinforced_wall:{name:"reinforced_wall",source:"mine",description:{rus:"Усиленная стена",eng:"Reinforced wall"},text:{rus:"+8 стена",eng:"+8 wall"},src:"./images/cards/reinforced_wall.png",resource:{bricks:8},action:function(e,t){e.updateResources({bricks:-8}),e.updateWallLife(8)},isActive:!1,object:{},backObject:{}},rock_garden:{name:"rock_garden",source:"mine",description:{rus:"Сад камней",eng:"Rock garden"},text:{rus:"+1 стена,\n+1 башня,\n+2 зверя",eng:"+1 wall,\n+1 tower,\n+2 beasts"},src:"./images/cards/rock_garden.png",resource:{bricks:1},action:function(e,t){e.updateResources({bricks:-1,beasts:2}),e.updateTowerLife(1),e.updateWallLife(1)},isActive:!1,object:{},backObject:{}},rock_launcher:{name:"rock_launcher",source:"mine",description:{rus:"Камнемет",eng:"Rock launcher"},text:{rus:"+6 стена,\n10 урона",eng:"+6 wall,\n10 damage"},src:"./images/cards/rock_launcher.png",resource:{bricks:18},action:function(e,t){e.updateResources({bricks:-18}),e.updateWallLife(6),t.takeDamage(10)},isActive:!1,object:{},backObject:{}},ruby:{name:"ruby",source:"magic",description:{rus:"Рубин",eng:"Ruby"},text:{rus:"+5 башня",eng:"+5 tower"},src:"./images/cards/ruby.png",resource:{gems:3},action:function(e,t){e.updateResources({gems:-3}),e.updateTowerLife(5)},isActive:!1,object:{},backObject:{}},sapphire:{name:"sapphire",source:"magic",description:{rus:"Сапфир",eng:"Sapphire"},text:{rus:"+11 башня",eng:"+11 tower"},src:"./images/cards/sapphire.png",resource:{gems:10},action:function(e,t){e.updateResources({gems:-10}),e.updateTowerLife(11)},isActive:!1,object:{},backObject:{}},secret_cave:{name:"secret_cave",source:"mine",description:{rus:"Секретная пещера",eng:"Secret cave"},text:{rus:"+1 магия,\nходить еще раз",eng:"+1 magic,\nplay again"},src:"./images/cards/secret_cave.png",resource:{bricks:8},action:function(e,t){e.updateResources({bricks:-8}),e.updateSources({magic:1})},isActive:!1,playAgain:!0,object:{},backObject:{}},shadow_fairy:{name:"shadow_fairy",source:"magic",description:{rus:"Темная фея",eng:"Shadow fairy"},text:{rus:"2 урона\nбашне врага,\nходить еще раз",eng:"2 damage to\nenemy tower,\nplay again"},src:"./images/cards/shadow_fairy.png",resource:{gems:6},action:function(e,t){e.updateResources({gems:-6}),t.updateTowerLife(-2)},isActive:!1,playAgain:!0,object:{},backObject:{}},shatterer:{name:"shatterer",source:"magic",description:{rus:"Обломки",eng:"Shatterer"},text:{rus:"-1 магия,\n9 урона\nбашне врага",eng:"-1 magic,\n9 damage to\nenemy tower"},src:"./images/cards/shatterer.png",resource:{gems:8},action:function(e,t){e.updateResources({gems:-8}),e.updateSources({magic:-1}),t.updateTowerLife(-9)},isActive:!1,object:{},backObject:{}},shift:{name:"shift",source:"mine",description:{rus:"Сдвиг",eng:"Shift"},text:{rus:"Поменяй свою стену со стеной врага",eng:"Switch your wall with enemy wall"},src:"./images/cards/shift.png",resource:{bricks:17},action:function(e,t){e.updateResources({bricks:-17});var r=e.wallLife,a=t.wallLife;e.updateWallLife(a-r),t.updateWallLife(r-a)},isActive:!1,object:{},backObject:{}},smoky_quartz:{name:"smoky_quartz",source:"magic",description:{rus:"Дымчатый кварц",eng:"Smoky quartz"},text:{rus:"1 урона\nбашне врага,\nходить еще раз",eng:"1 damage to\nenemy tower,\nplay again"},src:"./images/cards/smoky_quartz.png",resource:{gems:2},action:function(e,t){e.updateResources({gems:-2}),t.updateTowerLife(-1)},isActive:!1,playAgain:!0,object:{},backObject:{}},snake:{name:"snake",source:"dungeon",description:{rus:"Змея",eng:"Snake"},text:{rus:"4 урона\nбашне врага",eng:"4 damage to\n enemy tower"},src:"./images/cards/snake.png",resource:{beasts:6},action:function(e,t){e.updateResources({beasts:-6}),t.updateTowerLife(-4)},isActive:!1,object:{},backObject:{}},solar_flare:{name:"solar_flare",source:"magic",description:{rus:"Солнечное затмение",eng:"Solar flare"},text:{rus:"+2 башня,\n2 урона\nбашне врага",eng:"+2 tower,\n2 damage to\nenemy tower"},src:"./images/cards/solar_flare.png",resource:{gems:4},action:function(e,t){e.updateResources({gems:-4}),e.updateTowerLife(2),t.updateTowerLife(-2)},isActive:!1,object:{},backObject:{}},spearman:{name:"spearman",source:"dungeon",description:{rus:"Копьеносец",eng:"Spearman"},text:{rus:"Если стена > стены\nврага 3 урона,\nиначе 2 урона",eng:"If wall > enemy\nwall do 3 damage,\nelse do 2 damage"},src:"./images/cards/spearman.png",resource:{beasts:2},action:function(e,t){e.updateResources({beasts:-2}),e.wallLife>t.wallLife?t.takeDamage(3):t.takeDamage(2)},isActive:!1,object:{},backObject:{}},spell_weavers:{name:"spell_weavers",source:"magic",description:{rus:"Заклинатели",eng:"Spell weavers"},text:{rus:"+1 магия",eng:"+1 magic"},src:"./images/cards/spell_weavers.png",resource:{gems:3},action:function(e,t){e.updateResources({gems:-3}),e.updateSources({magic:1})},isActive:!1,object:{},backObject:{}},stone_giant:{name:"stone_giant",source:"dungeon",description:{rus:"Каменный гигант",eng:"Stone giant"},text:{rus:"10 урона,\n+4 стена",eng:"10 damage,\n+4 wall"},src:"./images/cards/stone_giant.png",resource:{beasts:15},action:function(e,t){e.updateResources({beasts:-15}),e.updateWallLife(4),t.takeDamage(10)},isActive:!1,object:{},backObject:{}},sturdy_wall:{name:"sturdy_wall",source:"mine",description:{rus:"Крепкая стена",eng:"Sturdy wall"},text:{rus:"+4 стена",eng:"+4 wall"},src:"./images/cards/sturdy_wall.png",resource:{bricks:3},action:function(e,t){e.updateResources({bricks:-3}),e.updateWallLife(4)},isActive:!1,object:{},backObject:{}},succubus:{name:"succubus",source:"dungeon",description:{rus:"Суккуб",eng:"Succubus"},text:{rus:"5 урона\nбашне врага,\nвраг теряет\n8 зверей",eng:"5 damage to\nenemy tower,\nenemy loses\n8 beasts"},src:"./images/cards/succubus.png",resource:{beasts:14},action:function(e,t){e.updateResources({beasts:-14}),t.updateResources({beasts:-8}),t.updateTowerLife(-5)},isActive:!1,object:{},backObject:{}},technology_copping:{name:"technology_copping",source:"mine",description:{rus:"Кража технологий",eng:"Technology copping"},text:{rus:"Если шахта < шахты\nврага, шахта =\nшахте врага",eng:"If mine < enemy\nmine, mine =\nenemy mine"},src:"./images/cards/technology_copping.png",resource:{bricks:5},action:function(e,t){e.updateResources({bricks:-5}),e.sources.mine<t.sources.mine&&e.updateSources({mine:t.sources.mine-e.sources.mine})},isActive:!1,object:{},backObject:{}},thief:{name:"thief",source:"dungeon",description:{rus:"Вор",eng:"Thief"},text:{rus:"Враг теряет 10 самоцветов, 6 камней, вы получаете половину",eng:"Enemy loses 10 gems,\n 6 bricks, you gain half of that"},src:"./images/cards/thief.png",resource:{beasts:12},action:function(e,t){var r=t.resources.gems-10>0?t.resources.gems-10:t.resources.gems,a=t.resources.bricks-6>0?t.resources.bricks-6:t.resources.bricks;e.updateResources({beasts:-12,gems:Math.floor(r/2),bricks:Math.floor(a/2)}),t.updateResources({gems:-10,bricks:-6})},isActive:!1,object:{},backObject:{}},topaz:{name:"topaz",source:"magic",description:{rus:"Топаз",eng:"Topaz"},text:{rus:"+12 башня,\n6 урона башне\nи стене врага",eng:"+12 tower,\n6 damage to\nenemy wall and tower"},src:"./images/cards/topaz.png",resource:{gems:17},action:function(e,t){e.updateResources({gems:-17}),e.updateTowerLife(12),t.updateWallLife(-6),t.updateTowerLife(-6)},isActive:!1,object:{},backObject:{}},tremor:{name:"tremor",source:"mine",description:{rus:"Дрожь",eng:"Tremor"},text:{rus:"Все стены\nполучают 5 урона,\nходить еще раз",eng:"All walls take\n 5 damage,\nplay again"},src:"./images/cards/tremor.png",resource:{bricks:7},action:function(e,t){e.updateResources({bricks:-7}),e.updateWallLife(-5),t.updateWallLife(-5)},isActive:!1,playAgain:!0,object:{},backObject:{}},troll:{name:"troll",source:"dungeon",description:{rus:"Тролль",eng:"Troll"},text:{rus:"+2 темницы",eng:"+2 dungeon"},src:"./images/cards/troll.png",resource:{beasts:7},action:function(e,t){e.updateResources({beasts:-7}),e.updateSources({dungeon:2})},isActive:!1,object:{},backObject:{}},unicorn:{name:"unicorn",source:"dungeon",description:{rus:"Единорог",eng:"Unicorn"},text:{rus:"Если магия > магии\nврага, 12 урона,\nиначе 8 урона",eng:"If magic > enemy\nmagic, 12 damage,\nelse 8 damage"},src:"./images/cards/unicorn.png",resource:{beasts:9},action:function(e,t){e.updateResources({beasts:-9}),e.sources.magic>t.sources.magic?t.takeDamage(12):t.takeDamage(8)},isActive:!1,object:{},backObject:{}},vampire:{name:"vampire",source:"dungeon",description:{rus:"Вампир",eng:"Vampire"},text:{rus:"10 урона,\nвраг теряет 5 камней,\n-1 темница врага",eng:"10 damage,\nenemy loses 5 beasts,\n-1 enemy dungeon"},src:"./images/cards/vampire.png",resource:{beasts:17},action:function(e,t){e.updateResources({beasts:-17}),t.takeDamage(10),t.updateResources({beasts:-5}),t.updateSources({dungeon:-1})},isActive:!1,object:{},backObject:{}},warlord:{name:"warlord",source:"dungeon",description:{rus:"Полководец",eng:"Warlord"},text:{rus:"13 урона,\nвы теряете 3 самоцвета",eng:"13 damage,\nyou lose 3 gems"},src:"./images/cards/warlord.png",resource:{beasts:13},action:function(e,t){e.updateResources({beasts:-13,gems:3}),t.takeDamage(13)},isActive:!1,object:{},backObject:{}},werewolf:{name:"werewolf",source:"dungeon",description:{rus:"Обротень",eng:"Werewolf"},text:{rus:"9 урона",eng:"9 damage"},src:"./images/cards/werewolf.png",resource:{beasts:5},action:function(e,t){e.updateResources({beasts:-5}),t.takeDamage(9)},isActive:!1,object:{},backObject:{}},wolf_sign:{name:"wolf_sign",source:"dungeon",description:{rus:"Знак волка",eng:"Wolf sign"},text:{rus:"8 урона,\n-1 шахта врага",eng:"8 damage,\n-1 enemy mine"},src:"./images/cards/wolf_sign.png",resource:{beasts:11},action:function(e,t){e.updateResources({beasts:-11}),t.takeDamage(8),t.updateSources({mine:-1})},isActive:!1,object:{},backObject:{}}},this.discardTxt="DISCARD",this.backOfCardSrc="./images/cards/back.png"}},function(e,t,r){"use strict";(function(e){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.Cookie=function(){function Cookie(){_classCallCheck(this,Cookie),this.gameCookieName="arcomage",this.gameStatusCookie="arcomage_status"}return r(Cookie,[{key:"setCookie",value:function(t,r){for(var a=[],s=[],n=0;n<t.cards.length;n++)a.push(t.cards[n].name),s.push(r.cards[n].name);e.set(this.gameCookieName,{playerOne:{cards:a,moves:t.moves,name:t.name,resources:t.resources,sources:t.sources,scores:t.scores,towerLife:t.towerLife,wallLife:t.wallLife},playerTwo:{cards:s,moves:t.moves,name:r.name,resources:r.resources,sources:r.sources,scores:t.scores,towerLife:r.towerLife,wallLife:r.wallLife}})}},{key:"setStatusCookie",value:function(t){e.set(this.gameStatusCookie,t)}},{key:"gameIsOff",value:function(){return!1===e.getJSON(this.gameStatusCookie)}},{key:"getPlayerOneValues",value:function(){return this.getCookie().playerOne}},{key:"getPlayerTwoValues",value:function(){return this.getCookie().playerTwo}},{key:"getPlayerOneName",value:function(){return this.getPlayerOneValues().name}},{key:"getPlayerTwoName",value:function(){return this.getPlayerTwoValues().name}},{key:"cookiesAreSet",value:function(){return!!e.get(this.gameCookieName)}},{key:"getCookie",value:function(){return e.getJSON(this.gameCookieName)}},{key:"removeStatusCookie",value:function(){e.remove(this.gameStatusCookie)}},{key:"removeCookie",value:function(){e.remove(this.gameCookieName)}},{key:"removeAll",value:function(){this.removeCookie(),this.removeStatusCookie()}}]),Cookie}()}).call(t,r(7))},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.CPUAI=function(){function CPUAI(e,t,r){_classCallCheck(this,CPUAI),this.cpuPlayer=e,this.cardsObject=t,this.paramsObject=r}return a(CPUAI,[{key:"applyCard",value:function(e,t,r){var a=this,s=this.cards.getSingleCard(e),n=this.cards.getBackOfCardObject(e),i=this.cards.getCardObject(e);r.isOn()&&r.getPlayerTurn(a.cpu)&&r.cardAvailable(e,a.cpu)&&function(){s.playAgain||r.playerMoved(a.cpu);var o={top:n.getTop(),left:n.getLeft()};i.setTop(100),i.setLeft((t.width-a.params.cardsValues.width)/2),n.animate({top:100,left:(t.width-a.params.cardsValues.width)/2},{onChange:t.fabricElement.renderAll.bind(t.fabricElement),easing:fabric.util.ease.easeInCubic,duration:500,onComplete:function(){t.fabricElement.remove(n),i.setOpacity(1),t.fabricElement.add(i),n.setTop(o.top),r.applyCard(e,a.cpu,r.playerOne),n.animate({opacity:0},{onChange:t.fabricElement.renderAll.bind(t.fabricElement),duration:100,onComplete:function(){setTimeout(function(){i.animate({top:0,opacity:0},{onChange:t.fabricElement.renderAll.bind(t.fabricElement),duration:500,onComplete:function(){a.cpu.removeCard(s),i.setTop(o.top),i.setOpacity(1),t.fabricElement.remove(i),r.allotCards(a.cpu)&&(s.playAgain?(r.drawBackOfCards(t,a.cpu),a.move(t,r,a.cpu.cards)):document.dispatchEvent(new CustomEvent("CPU moved")))}})},250)}})}})}()}},{key:"discardCard",value:function(e,t,r){var a=this,s=this.cards.getSingleCard(e),n=this.cards.getBackOfCardObject(e),i=n.getTop();r.isOn()&&r.getPlayerTurn(a.cpu)&&r.cardAvailable(e,a.cpu)&&(r.playerMoved(a.cpu),a.cards.deactivate(e),n.animate({top:0,opacity:0},{onChange:t.fabricElement.renderAll.bind(t.fabricElement),duration:500,onComplete:function(){a.cpu.removeCard(s),n.setTop(i),t.fabricElement.remove(n),r.allotCards(a.cpu)&&document.dispatchEvent(new CustomEvent("CPU moved"))}}))}},{key:"getLessResourcefulCard",value:function(e){for(var t=e[0],r=0,a=e.length;r<a;r++)e[r].resource[this.relation[e[r].source]]<=t.resource[this.relation[t.source]]&&(t=e[r]);return t.name}},{key:"getMostResourcefulCard",value:function(e){for(var t=e[0],r=0,a=e.length;r<a;r++)e[r].resource[this.relation[e[r].source]]>=t.resource[this.relation[t.source]]&&(t=e[r]);return t.name}},{key:"getAllCardsThatCanBeUsed",value:function(e){var t=[],r=!0,a=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(r=(n=i.next()).done);r=!0){var o=n.value;this.cards.cardCanBeUsed(o.name,this.cpu)&&t.push(o)}}catch(e){a=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw s}}return t}},{key:"cardsCanBeUsed",value:function(e){for(var t=0,r=e.length;t<r;t++){var a=e[t].name;if(this.cards.cardCanBeUsed(a,this.cpu))return!0}return!1}},{key:"move",value:function(e,t,r){function removeCard(e,t){var r=[],a=!0,s=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;c.name!==t&&r.push(c)}}catch(e){s=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw n}}return r}var a=this.cards.cards,s=this;if(s.cardsCanBeUsed(r)){var n=s.getAllCardsThatCanBeUsed(r),i=s.getMostResourcefulCard(n);i===a.berserker.name&&s.cpu.towerLife>=5?s.move(e,t,removeCard(n,a.berserker.name)):i===a.cave_river.name&&s.cpu.wallLife<=t.playerOne.wallLife?s.move(e,t,removeCard(n,i)):i===a.defective_ore.name&&s.cpu.resources.bricks<t.playerOne.resources.bricks?s.move(e,t,removeCard(n,i)):i===a.discord.name&&s.cpu.towerLife<t.playerOne.towerLife&&s.cpu.towerLife<8?s.move(e,t,removeCard(n,i)):i===a.earthquake.name&&s.cpu.sources.mine<t.playerOne.sources.mine?s.move(e,t,removeCard(n,i)):i===a.goblin_mob.name&&s.cpu.wallLife<3?s.move(e,t,removeCard(n,i)):i===a.parity.name&&s.cpu.sources.magic>t.playerOne.sources.magic?s.move(e,t,removeCard(n,i)):i===a.power_burn.name&&s.cpu.towerLife<10?s.move(e,t,removeCard(n,i)):i===a.shift.name&&s.cpu.wallLife>t.playerOne.wallLife&&0!==s.cpu.wallLife?s.move(e,t,removeCard(n,i)):i===a.technology_copping.name&&s.cpu.sources.mine>=t.playerOne.sources.mine?s.move(e,t,removeCard(n,i)):i===a.tremor.name&&(t.playerOne.wallLife<=5||s.cpu.wallLife<t.playerOne.wallLife)?s.move(e,t,removeCard(n,i)):s.applyCard(i,e,t)}else s.discardCard(s.getLessResourcefulCard(s.cpu.cards),e,t)}},{key:"cpu",get:function(){return this.cpuPlayer}},{key:"cards",get:function(){return this.cardsObject}},{key:"relation",get:function(){return this.paramsObject.canvasValues.relations}},{key:"params",get:function(){return this.paramsObject}}]),CPUAI}()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.DOM=function(){function DOM(){_classCallCheck(this,DOM),this.gameOverId="game-over",this.gameOverTitleId="game-over-title",this.gameOverMovesId="game-over-moves",this.wrapperId="wrapper",this.winText="Congratulations!<br>You win!",this.loseText="Sorry, pal!<br>You lose..."}return a(DOM,[{key:"showGameOverMessage",value:function(e,t,r){var a=this,s=e?this.winText:this.loseText,n=e?"#010101 url('../images/background/victory.jpg') center no-repeat":"#010101 url('../images/background/defeat.jpg') center no-repeat",i=e?1e3:-1e3,o=r+i>0?r+i:0,c="Scores: "+o+" <br><br> Moves: "+t;document.querySelector("#game-over > .container").style.background=n,document.getElementById(this.gameOverTitleId).innerHTML=s,document.getElementById(this.gameOverMovesId).innerHTML=c,setTimeout(function(){document.getElementById(a.gameOverId).style.display="block",document.getElementById(a.wrapperId).classList.toggle("blur")},500)}}]),DOM}()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}(),s=r(13);t.Events=function(){function Events(e,t,r,a){_classCallCheck(this,Events),this.cardsObject=t,this.canvasObject=r,this.gameObject=a,this.paramsObject=e,this.cardShakeEventStatus=!1}return a(Events,[{key:"cardShakeOn",value:function(){this.cardShakeEventStatus=!0}},{key:"cardShakeOff",value:function(){this.cardShakeEventStatus=!1}},{key:"init",value:function(){this.addEvents()}},{key:"shakeCard",value:function(e){var t=this,r=this.cards.getCardObject(e),a=r.getLeft();this.cardShakeEventStarted||(t.cardShakeOn(),r.animate({left:a-t.params.cardsValues.padding},{onChange:t.canvas.fabricElement.renderAll.bind(t.canvas.fabricElement),duration:100,onComplete:function(){r.animate({left:a+t.params.cardsValues.padding},{onChange:t.canvas.fabricElement.renderAll.bind(t.canvas.fabricElement),duration:100,onComplete:function(){r.animate({left:a},{onChange:t.canvas.fabricElement.renderAll.bind(t.canvas.fabricElement),duration:100,onComplete:function(){t.cardShakeOff()}})}})}}))}},{key:"applyCard",value:function(e,t){var r=this,a=this.cards.getSingleCard(t),n=this.cards.getCardObject(t),i=e===r.playerOne?r.playerOne:r.playerTwo,o=e===r.playerOne?r.playerTwo:r.playerOne;r.game.isOn()&&r.game.getPlayerTurn(i)&&(r.cards.cardCanBeUsed(t,i)?r.game.cardAvailable(t,i)&&function(){a.playAgain||r.game.playerMoved(i);var e={top:n.getTop(),left:n.getLeft()};n.animate({top:100,left:(r.canvas.width-r.params.cardsValues.width)/2,opacity:1},{onChange:r.canvas.fabricElement.renderAll.bind(r.canvas.fabricElement),easing:fabric.util.ease.easeInCubic,duration:500,onComplete:function(){r.game.applyCard(t,i,o),n.animate({top:0,opacity:0},{onChange:r.canvas.fabricElement.renderAll.bind(r.canvas.fabricElement),duration:500,onComplete:function(){if(i.removeCard(a),n.setTop(e.top),r.canvas.fabricElement.remove(n),r.game.isOn()){new Promise(function(e,t){r.game.allotCards(i)?e():t("Can`t allot cards!")}).then(function(){r.canvas.fabricElement.renderAll(),s.Arcomage.clearCardsFromCanvas(r.canvas,i)}).then(function(){a.playAgain?r.game.drawCards(r.canvas,i):r.game.CPUMove(r.canvas)})}}})}})}():r.shakeCard(t))}},{key:"discardCard",value:function(e,t){var r=this,a=this.cards.getSingleCard(t),n=this.cards.getCardObject(t),i=e===r.playerOne?r.playerOne:r.playerTwo;r.game.isOn()&&r.game.getPlayerTurn(i)&&r.game.cardAvailable(t,i)&&function(){r.game.playerMoved(i),e.updateScores(-r.cards.getScore(t));var o=n.getTop();r.cards.deactivate(t),n.animate({top:0,opacity:0},{onChange:r.canvas.fabricElement.renderAll.bind(r.canvas.fabricElement),duration:500,onComplete:function(){i.removeCard(a),n.setTop(o),r.canvas.fabricElement.remove(n),new Promise(function(e,t){r.game.allotCards(i)?e():t("Can`t allot cards!")}).then(function(){s.Arcomage.clearCardsFromCanvas(r.canvas,i)}).then(function(){r.game.CPUMove(r.canvas)})}})}()}},{key:"addEvents",value:function(){var e=this,t=this,r=!0,a=!1,s=void 0;try{for(var n,i=this.cards.names[Symbol.iterator]();!(r=(n=i.next()).done);r=!0)!function(){var r=n.value,a=e.cards.getCardObject(r);a.on("mouseover",function(){a.setOpacity(1),t.canvas.fabricElement.renderAll()}),a.on("mouseout",function(){a.setOpacity(.9),t.canvas.fabricElement.renderAll()});for(var s=0;s<5;s++)a.getObjects()[s].on("mousedown",function(){t.applyCard(t.playerOne,r)});for(var i=5;i<7;i++)a.getObjects()[i].on("mousedown",function(){t.discardCard(t.playerOne,r)})}()}catch(e){a=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw s}}}},{key:"cardShakeEventStarted",get:function(){return this.cardShakeEventStatus}},{key:"canvas",get:function(){return this.canvasObject}},{key:"params",get:function(){return this.paramsObject}},{key:"cards",get:function(){return this.cardsObject}},{key:"game",get:function(){return this.gameObject}},{key:"playerOne",get:function(){return this.game.playerOne}},{key:"playerTwo",get:function(){return this.game.playerTwo}}]),Events}()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.Param=function(){function Param(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{max:{tower:100,wall:150,sources:50,resources:999},playerOne:{name:"Player",towerLife:[10,10,10],wallLife:[10,15,5],resources:[{bricks:10,gems:10,beasts:10},{bricks:10,gems:5,beasts:10},{bricks:10,gems:5,beasts:5}],sources:{mine:1,magic:1,dungeon:1}},playerTwo:{name:["CPU","Stan","Cartman","Batman","Chuck","Goblin","Mr. Bot"],towerLife:[10,15,15],wallLife:[10,15,15],resources:[{bricks:10,gems:10,beasts:10},{bricks:15,gems:15,beasts:15},{bricks:15,gems:20,beasts:15}],sources:{mine:1,magic:1,dungeon:1}}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{playersNamesText:{maxLetters:10,width:140,height:28,padding:5,strokeWidth:0,borderRadius:2,fontSize:24,textColor:"#000",strokeColor:"#fff",fillColor:"#7f8c8d",activeFillColor:"#000"},relations:{mine:"bricks",magic:"gems",dungeon:"beasts"},sources:{width:100,height:100,imgWidth:80,imgHeight:60,resImgWidth:60,resImgHeight:45,padding:5,paddingTop:20,textPadding:5,fontSize:24,descFontSize:18,textColor:"#010101",borderRadius:2,backgroundColor:"#f8ecc2",backgroundStrokeWidth:2,mine:{color:"#d35400",textColor:"#010101",src:"./images/sources/mine.png",resSrc:"./images/sources/bricks.png",resource:"bricks",position:0},magic:{color:"#2980b9",textColor:"#010101",src:"./images/sources/magic.png",resSrc:"./images/sources/gems.png",resource:"gems",position:1},dungeon:{color:"#27ae60",textColor:"#010101",src:"./images/sources/dungeon.png",resSrc:"./images/sources/beasts.png",resource:"beasts",position:2}},towers:{positionY:300,width:50,height:30,roofWidth:70,roofHeight:50,heightStep:2.5,padding:155,topTextPadding:2,fontSize:22,textColor:"#010101",roofColor:"#7c3607",roofStrokeColor:"#5d2906",towerColor:"#a34508"},walls:{positionY:300,width:36,heightStep:2.5,padding:250,topTextPadding:2,fontSize:22,textColor:"#010101",wallColor:"#7f8c8d",src:"./images/temp/bricks.jpg"},cards:{width:141,height:235,padding:4,mainTextPadding:120,cardsStrokeWidth:2,cardsBordersRadius:2,cardsBodyColor:"#f8ecc2",imageWidth:140,imageHeight:90,imagePadding:22,priceCircleRadius:12,priceFontSize:18,priceStrokeWidth:1,discardHeight:30,discardFontSize:16,backColor:"#010101",backTextColor:"#e67e22",backTextFontSize:18,backTextPadding:50,mine:{color:"#d35400",textColor:"#010101"},magic:{color:"#2980b9",textColor:"#010101"},dungeon:{color:"#27ae60",textColor:"#010101"}}},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"arcomage",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"arcomage-canvas";_classCallCheck(this,Param),this.playersVls=e,this.canvasVls=t,this.cardsPerPlayer=r,this.idForDivCanvas=a,this.idForCanvas=s}return a(Param,[{key:"playersValues",get:function(){return this.playersVls}},{key:"playerOneName",get:function(){return this.playersVls.playerOne.name}},{key:"playerTwoName",get:function(){return this.playersVls.playerTwo.name[Math.floor(Math.random()*this.playersVls.playerTwo.name.length)]}},{key:"playerOneValues",get:function(){return this.playersVls.playerOne}},{key:"playerTwoValues",get:function(){return this.playersVls.playerTwo}},{key:"canvasValues",get:function(){return this.canvasVls}},{key:"cardsValues",get:function(){return this.canvasVls.cards}},{key:"cardsQuantity",get:function(){return this.cardsPerPlayer}},{key:"maxValues",get:function(){return this.playersVls.max}},{key:"canvasDivId",get:function(){return this.idForDivCanvas}},{key:"canvasId",get:function(){return this.idForCanvas}},{key:"relations",get:function(){return this.canvasVls.relations}}]),Param}()},function(e,t,r){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,r){return t&&defineProperties(e.prototype,t),r&&defineProperties(e,r),e}}();t.Player=function(){function Player(e,t,r,a,s){_classCallCheck(this,Player),this.playerName=e,this.playerTowerLife=Array.isArray(t.towerLife)?t.towerLife[s]:t.towerLife,this.playerWallLife=Array.isArray(t.wallLife)?t.wallLife[s]:t.wallLife,this.playerResources=Array.isArray(t.resources)?t.resources[s]:t.resources,this.playerSources=t.sources,this.canvasTowerHeightStepValue=a.towers.heightStep,this.canvasWallHeightStepValue=a.walls.heightStep,this.maxWallLifeValue=r.wall,this.maxTowerLifeValue=r.tower,this.maxSourcesValue=r.sources,this.maxResourcesValue=r.resources,this.movesValue=t.moves||0,this.scoresValue=t.scores||0,this.playerNameObject={},this.playerSourcesObject={},this.playerResourcesObject={},this.playerCards=[],this.playerTowerObject={},this.playerWallObject={}}return s(Player,[{key:"removeCard",value:function(e){this.cards=this.cards.filter(function(t){return t.name!==e.name})}},{key:"updateMoves",value:function(){this.movesValue++}},{key:"updateScores",value:function(e){this.scoresValue+=e}},{key:"updateTowerLife",value:function(e){var t=e;t<0&&Math.abs(t)>this.towerLife?(this.towerLife=0,this.towerObject.getObjects()[0].setTop(this.towerObject.getObjects()[1].getTop())):this.towerLife+t>this.maxTowerLife?this.towerLife<=this.maxTowerLife?(this.towerLife+=t,this.towerObject.getObjects()[1].setHeight(this.towerLife*this.canvasTowerHeightStep),this.towerObject.getObjects()[0].setTop(this.towerObject.getObjects()[1].getTop()-this.towerObject.getObjects()[1].getHeight())):this.towerObject.getObjects()[0].setTop(this.towerObject.getObjects()[1].getTop()-this.towerObject.getObjects()[1].getHeight()):(this.towerLife+=t,this.towerObject.getObjects()[0].setTop(this.towerObject.getObjects()[0].getTop()-t*this.canvasTowerHeightStep)),this.towerObject.getObjects()[1].setHeight(this.towerLife*this.canvasTowerHeightStep),this.towerObject.getObjects()[3].setText(this.towerLife.toString())}},{key:"updateWallLife",value:function(e){var t=e;if(this.wallLife>=this.maxWallLife)this.wallLife=this.maxWallLife;else{if(t<0&&Math.abs(t)>this.wallLife){var r=t+this.wallLife;return this.wallLife=0,this.wallObject.getObjects()[0].setHeight(this.wallLife*this.canvasWallHeightStep),this.wallObject.getObjects()[2].setText(this.wallLife.toString()),r}this.wallLife+=t}this.wallObject.getObjects()[0].setHeight(this.wallLife*this.canvasWallHeightStep),this.wallObject.getObjects()[2].setText(this.wallLife.toString())}},{key:"updateSources",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];this.sources[t]+r>0?this.sources[t]+r<this.maxSources?this.sources[t]+=r:this.sources[t]=this.maxSources:this.sources[t]=1,this.sourcesObject[t].setText(this.sources[t].toString())}}},{key:"updateResources",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];this.resources[t]+r>0?this.resources[t]+r<this.maxResources?this.resources[t]+=r:this.resources[t]=this.maxResources:this.resources[t]=0,this.resourcesObject[t].setText(this.resources[t].toString())}}},{key:"takeDamage",value:function(e){var t=e;t<=this.wallLife?this.updateWallLife(-t):this.updateTowerLife(this.updateWallLife(-t))}},{key:"updateCards",value:function(e){this.cards.push(e)}},{key:"name",get:function(){return this.playerName}},{key:"towerLife",get:function(){return this.playerTowerLife},set:function(e){e>=0&&(this.playerTowerLife=e<this.maxTowerLifeValue?e:this.maxTowerLifeValue)}},{key:"wallLife",get:function(){return this.playerWallLife},set:function(e){e>=0&&(this.playerWallLife=e<this.maxWallLifeValue?e:this.maxWallLifeValue)}},{key:"resources",get:function(){return this.playerResources}},{key:"sources",get:function(){return this.playerSources}},{key:"nameObject",get:function(){return this.playerNameObject},set:function(e){"object"===(void 0===e?"undefined":a(e))&&(this.playerNameObject=e)}},{key:"towerObject",get:function(){return this.playerTowerObject},set:function(e){"object"===(void 0===e?"undefined":a(e))&&(this.playerTowerObject=e)}},{key:"wallObject",get:function(){return this.playerWallObject},set:function(e){"object"===(void 0===e?"undefined":a(e))&&(this.playerWallObject=e)}},{key:"sourcesObject",get:function(){return this.playerSourcesObject},set:function(e){"object"===(void 0===e?"undefined":a(e))&&(this.playerSourcesObject=e)}},{key:"resourcesObject",get:function(){return this.playerResourcesObject},set:function(e){"object"===(void 0===e?"undefined":a(e))&&(this.playerResourcesObject=e)}},{key:"cards",get:function(){return this.playerCards},set:function(e){this.playerCards=e}},{key:"maxTowerLife",get:function(){return this.maxTowerLifeValue}},{key:"maxWallLife",get:function(){return this.maxWallLifeValue}},{key:"maxSources",get:function(){return this.maxSourcesValue}},{key:"maxResources",get:function(){return this.maxResourcesValue}},{key:"canvasTowerHeightStep",get:function(){return this.canvasTowerHeightStepValue}},{key:"canvasWallHeightStep",get:function(){return this.canvasWallHeightStepValue}},{key:"moves",get:function(){return this.movesValue}},{key:"scores",get:function(){return this.scoresValue}}]),Player}()},function(e,t,r){"use strict";(function(e){var t=r(29);e(document).ready(function(){var r=new t.Loader,a=e("body");r.initCookie(),r.cookie.cookiesAreSet()?r.start(r.cookie.getPlayerOneName()):e("#start-field").show(),a.on("click","#start-game-button",function(){var t=e("#player-name-input").val(),a=e("button.difficulty-level.active").data("value");e("#start-field").hide(),r.start(t,a)}),a.on("click","button.difficulty-level",function(t){e("button.difficulty-level").removeClass("active"),e(t.currentTarget).addClass("active")}),a.on("click",".newgame-button",function(){r.cookie.removeAll(),window.location.reload(!0)})})}).call(t,r(6))}],[43]);